
### 1주차 - ERD, API 설계
| 여기에 작성해주세요

### 2주차 - 상품 관련 DTO 및 ENTITY 구현
| https://scratch-library-74f.notion.site/1-aeba30e7970145119f5231c27c8b2d1d?pvs=4 (맨 아래에 DTO, Entity 예시를 작성했습니다.)

**ERD 재설계**
![image](https://github.com/user-attachments/assets/edab4b0e-b0e0-428f-b087-73115e5e8fc0)


-> 확실히 엔티티와 DTO를 작성하면서 조금 보완이 되는 느낌이다. 계산된 필드는 제거했고 옵션은 등록을 위해서 남겨두었다

**반정규화**

- 시스템의 성능향상과 개발과 운영의 단순화를 위해 중복, 통합, 분리 등을 수행하는 데이터 모델링의 기법
- 저의 경우는 옵션테이블에 들어갔던 옵션 추가 금액을 계산된 필드로 사용했습니다

  https://velog.io/@dddooo9/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EB%B0%98%EC%A0%95%EA%B7%9C%ED%99%94#%EB%B0%98%EC%A0%95%EA%B7%9C%ED%99%94-%EA%B8%B0%EB%B2%95
  반정규화 참고 블로그입니다.

-> 계산된 필드를 사용하지 않고 옵션이 들어간 금액을 그냥 저장하는 것이 더 단순하다고 생각해서 계산된 필드를 제거했습니다.

**API 재설계**

1. 각각의 요청에 대한 상태코드를 반환   
2. 실패하는 경우에 상황을 나타내자 
3. 요청으로 필요한 값을 모두 전달하자   
4. 페이지 조회 기능... 추가해보자   


**DTO(Data Transfer Object)**
- 데이터 전송 객체(필요한 데이터만 전달하기 위해 사용)   
- 엔티티가 가지는 민감한 정보는 노출하지 않기 위해 사용   
- 각 DTO 에는 필요한 정보만을 등록,조회,삭제,수정할 수 있도록 설계   
- 비즈니스 로직은 들어가면 안된다(서비스에서 처리)      
  
**Entity**
- 데이터 베이스에 직접 연결된 테이블
- 민감한 정보를 가지고 있어 사용에 주의(비밀번호, 주민등록번호)
- 엔티티는 데이터베이스 접근이 가능, 이것을 직접 조회하면 보안에 취약


-> 엔티티 대신 DTO를 사용하는 이유는 엔티티가 가지는 민감한 정보를 노출하지 않음과 동시에 필요한 정보만을 전달하기 위함이다   
    (엔티티의 크기가 클 경우 트래픽을 줄이는 용도로도 사용한다)   


**Entity 설계 과정**

- 엔티티가 가질 속성을 정의   
- 데이터의 무결성 조건을 정의 (ex nullable = false, uniqueConstraints = @UniqueConstraint(name = " uk_variable_name", ColumnNames = "variable_name")
- 기본키 생성(IDENTITY 전략 선택)
- 각 엔티티의 관계에 따라 @ManyToOne, @OneToMany 등의 관계를 정의, 각 엔티티에서 양방향으로 정의
- 객체 생성 패턴으로 @Builder 선택(체이닝 형식으로 객체를 생성하여 가독성이 높고 편리하다)

**DTO 설계 과정**
처음에는 각각의 기능에 따른 클래스를 선언하여 필요한 것들을 필드로 가지고, 생성자를 통해서만 값을 지정하는 방식으로 설계했다    
-> 추후에 레코드를 사용하여 코드를 수정했다.  

- 엔티티 객체를 매개변수로 받아 getter를 통해 생성자에 값을 저장
- 한번씩 로그인과 같이 필요한 매개변수가 정해져 있는 경우에는 이메일, 비밀번호만 매개변수로 한 생성자를 만듬
- 각각의 엔티티 간의 관계에 유념해서 외래키로 값을 가지고 오는 경로를 확인
- 클래스의 필드는 불변 객체로, 값을 변경하는 것은 생성자를 통해서만(
  

**API 수정**

https://www.notion.so/pusan-dev/2-API-42133cdcdb894e11b8ec17ec32c0ebe4

